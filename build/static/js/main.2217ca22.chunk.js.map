{"version":3,"sources":["helpers/money.js","api/index.js","components/Map/Map.jsx","api/places.js","store/mapStore.js","store/index.js","pages/Home.jsx","components/Container/styled.js","constants/variablas.js","components/Header/styled.js","components/Button/styled.js","components/Button/Button.jsx","components/InputField/InputField.jsx","components/Header/Header.jsx","components/Sidebar/styled.js","components/Sidebar/Sidebar.jsx","components/Container/Container.jsx","App.js","index.js"],"names":["formattedMoney","value","toLocaleString","minimumFractionDigits","maximumFractionDigits","replace","instance","axios","create","baseURL","headers","Map","places","mapRef","useRef","useEffect","lat","lng","radius","Promise","res","rej","url","method","data","then","catch","err","getHeatMap","console","log","window","ymaps","modules","require","Heatmap","heatmap","map","h","setMap","current","alert","query","apikey","instanceRef","style","flexGrow","width","height","defaultState","center","zoom","p","geometry","properties","iconContent","usertime","iconCaption","cost","hintContent","balloonContentHeader","area","balloonContentBody","floor","options","preset","iconImageSize","MapStore","makeObservable","this","address","observable","action","createNewStore","mapStore","configure","useProxies","storeContext","React","createContext","StoreProvider","children","store","useLocalStore","Provider","useStore","useContext","Error","observer","useState","setPlaces","type","topk","getPlaces","Main","styled","main","Container","div","SHADOW","DARK_GRAY","Header","header","Button","button","onClick","InputField","onChange","place","setPlace","e","target","setAddress","Sidebar","App","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2217ca22.chunk.js","sourcesContent":["export function formattedMoney(value) {\r\n  if (!value) return \"0\";\r\n\r\n  let minimumFractionDigits = +value % 1 === 0 ? 0 : 2;\r\n\r\n  return (+value)\r\n    .toLocaleString(\"en-US\", {\r\n      minimumFractionDigits: minimumFractionDigits,\r\n      maximumFractionDigits: 2,\r\n    })\r\n    .replace(/,/g, \" \");\r\n}\r\n","import axios from \"axios\";\r\nexport const instance = axios.create({\r\n  baseURL: 'http://84.201.168.52/api/v1',\r\n  headers: {'Content-Type': 'application/json'}\r\n});","import {Map as YMap, YMaps, Placemark} from \"react-yandex-maps\";\r\nimport {formattedMoney} from \"../../helpers/money\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { getHeatMap, getPlaces } from \"../../api/places\";\r\n\r\nfunction Map({places}) {\r\n  const mapRef = useRef();\r\n  useEffect(() => {\r\n      getHeatMap({lat:55.731061,lng:37.579445,radius:0.005}).then(data => {\r\n        console.log(\"data\", data)\r\n        console.log(\"window.ymaps\", window.ymaps)\r\n        window.ymaps.modules.require(['Heatmap'], function (Heatmap) {\r\n          console.log(\"Heatmap\", Heatmap)\r\n          let mapData = data.heatmap.map(h=>([h.lng,h.lat])),\r\n            heatmap = new Heatmap(mapData);\r\n          heatmap.setMap(mapRef.current);\r\n        });\r\n\r\n      }).catch(err => {\r\n        alert(err)\r\n        console.log(\"err\", err)\r\n      })\r\n  }, [])\r\n  return (\r\n    <YMaps modules={[\"Heatmap\"]} query={{apikey: \"3a938c7f-953d-484c-9fee-5d2b9c12bb53\"}}>\r\n      <YMap instanceRef={mapRef} style={{flexGrow: 1}} width={\"100%\"} height={\"100%\"} defaultState={{\r\n        center: [55.75, 37.57], zoom: 9,\r\n        modules: [\"geoObject.addon.balloon\", \"geoObject.addon.hint\"]\r\n      }}>\r\n        {places && places.map(p => (\r\n          <Placemark\r\n            geometry={[p.lat, p.lng]}\r\n            properties={{\r\n              iconContent: p.usertime,\r\n              iconCaption: formattedMoney(p.cost),\r\n              hintContent: \"3\",\r\n              balloonContentHeader: `Снять в аренду ${p.area}м^2 за ${formattedMoney(p.cost)}`,\r\n              balloonContentBody: `Этаж ${p.floor}`,\r\n              // balloonContentFooter: \"footer\"\r\n            }}\r\n            modules={['geoObject.addon.balloon', 'geoObject.addon.hint']}\r\n            options={{\r\n              preset: \"islands#circleIcon\",\r\n              iconImageSize: [30, 30],\r\n            }}\r\n          />\r\n        ))}\r\n      </YMap>\r\n    </YMaps>\r\n  )\r\n}\r\n\r\nexport default Map","import {instance} from \"./index\"\r\n\r\nexport const getPlaces = ({address}) => {\r\n  return new Promise((res, rej) => {\r\n    instance({\r\n      url: \"places\",\r\n      method: \"POST\",\r\n      data: {\r\n        type: \"кафе\",\r\n        address: address,\r\n        topk: 10,\r\n      }\r\n    }).then(data => (\r\n      res(data.data)\r\n    )).catch(err => (rej(err)))\r\n  })\r\n}\r\n\r\nexport const getHeatMap = ({lat,lng,radius}) => {\r\n  return new Promise((res, rej) => {\r\n    instance({\r\n      url: \"heatmap\",\r\n      method: \"POST\",\r\n      data: {\r\n        lat,lng,radius\r\n      }\r\n    }).then(data => (\r\n      res(data.data)\r\n    )).catch(err => (rej(err)))\r\n  })\r\n}","import {action, makeObservable, observable} from \"mobx\";\r\n\r\nclass MapStore {\r\n  @observable address = \"Метро Парк Культуры\";\r\n\r\n  constructor() {\r\n    makeObservable(this); // https://mobx.js.org/enabling-decorators.html\r\n  }\r\n\r\n  @action\r\n  setAddress(address) {\r\n    this.address = address;\r\n  }\r\n}\r\n\r\nexport default MapStore;\r\n","import React, {createContext, useContext} from \"react\";\r\nimport {observer, useLocalStore} from \"mobx-react\";\r\nimport {configure} from \"mobx\";\r\n\r\nimport MapStore from \"./mapStore\";\r\n\r\nconfigure({\r\n  useProxies: \"never\", // need for IE, disable Proxy objects :(\r\n});\r\n\r\nfunction createNewStore() {\r\n  const s = {\r\n    mapStore: new MapStore(),\r\n  };\r\n\r\n  return s;\r\n}\r\n\r\nconst storeContext = React.createContext(null)\r\n\r\nexport const StoreProvider = ({ children }) => {\r\n  const store = useLocalStore(createNewStore)\r\n  return <storeContext.Provider value={store}>{children}</storeContext.Provider>\r\n}\r\n\r\nexport const useStore = () => {\r\n  const store = React.useContext(storeContext)\r\n  if (!store) {\r\n    // this is especially useful in TypeScript so you don't need to be checking for null all the time\r\n    throw new Error('useStore must be used within a StoreProvider.')\r\n  }\r\n  return store\r\n}","import Map from \"../components/Map/Map\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {getPlaces} from \"../api/places\";\r\nimport {useStore} from \"../store\";\r\nimport {observer} from \"mobx-react\";\r\n\r\nfunction Home() {\r\n  const [places, setPlaces] = useState([])\r\n  const {mapStore} = useStore()\r\n\r\n  useEffect(() => {\r\n    if (mapStore.address) {\r\n      getPlaces({address: mapStore.address}).then(data => {\r\n        console.log(\"data\", data)\r\n        setPlaces(data.places)\r\n      }).catch(err => {\r\n        alert(err)\r\n        console.log(\"err\", err)\r\n      })\r\n    }\r\n  }, [mapStore.address])\r\n  return (\r\n    <Map places={places}/>\r\n  )\r\n}\r\n\r\nexport default observer(Home)","import styled from \"styled-components\"\r\n\r\nexport const Main = styled.main`\r\n  display: flex;\r\n  flex-grow: 1;\r\n  height: 100%;\r\n`;\r\nexport const Container = styled.div`\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n`;","export const SHADOW = \"0 16px 36px rgba(0,0,0,0.25)\"\r\nexport const RADIUS = \"8px\"\r\nexport const WHITE = \"#ffffff\"\r\nexport const DARK_GRAY = \"#828282\"\r\nexport const TRANSITION_FAST = \"0.15s ease-out\"","import styled from \"styled-components\"\r\nimport {SHADOW} from \"../../constants/variablas\";\r\n\r\nexport const Header = styled.header`\r\n  flex: 0 0 60px;\r\n  align-items: center;\r\n  padding: 0 40px;\r\n  box-shadow: ${SHADOW};\r\n  z-index: 1;\r\n  display: flex;\r\n`;","import styled from \"styled-components\"\r\nimport {DARK_GRAY, RADIUS, SHADOW, TRANSITION_FAST, WHITE} from \"../../constants/variablas\";\r\n\r\nexport const Button = styled.button`\r\n  height: 45px;\r\n  padding: 0 20px;\r\n  border: 1px solid ${DARK_GRAY};\r\n  border-radius: ${RADIUS};\r\n  background-color: ${WHITE};\r\n  cursor: pointer;\r\n  transition: ${TRANSITION_FAST};\r\n  &:hover{\r\n    box-shadow: ${SHADOW};\r\n  }\r\n`;","import * as S from \"./styled\";\r\n\r\nexport default function Button({children,onClick}) {\r\n  return (\r\n    <S.Button onClick={onClick}>{children}</S.Button>\r\n  )\r\n}","// import {} from \"./styled\";\r\n\r\nexport default function InputField({value, onChange}) {\r\n  return (\r\n    <label>\r\n      <input value={value} onChange={onChange}/>\r\n    </label>\r\n  )\r\n}","import * as S from \"./styled\"\r\nimport Button from \"../Button/Button\";\r\nimport InputField from \"../InputField/InputField\";\r\nimport {useState} from \"react\";\r\nimport {useStore} from \"../../store\";\r\n\r\nfunction Header() {\r\n  const {mapStore} = useStore()\r\n  const [place,setPlace] = useState(mapStore.address)\r\n  const handleApply = ()=>{\r\n    mapStore.setAddress(place)\r\n  }\r\n  return (\r\n    <S.Header>\r\n      <Button>Фильтр</Button>\r\n      <InputField value={place} onChange={e=>{setPlace(e.target.value)}}/>\r\n      <Button onClick={handleApply}>Применить</Button>\r\n    </S.Header>\r\n  )\r\n}\r\n\r\nexport default Header","import styled from \"styled-components\"\r\nimport {DARK_GRAY} from \"../../constants/variablas\";\r\n\r\nexport const Sidebar = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 20px;\r\n  padding: 20px 10px;\r\n  width: 200px;\r\n  border-right: 1px solid ${DARK_GRAY};\r\n`;","import * as S from \"./styled\";\r\nimport Button from \"../Button/Button\";\r\n\r\nexport default function Sidebar() {\r\n  return (\r\n    <S.Sidebar>\r\n      <Button>Карта</Button>\r\n      <Button>Анализ организации</Button>\r\n      <Button>Отчёт</Button>\r\n    </S.Sidebar>\r\n  )\r\n}","import * as S from \"./styled\";\r\nimport Header from \"../Header/Header\";\r\nimport Sidebar from \"../Sidebar/Sidebar\";\r\n\r\nexport default function Container({children}) {\r\n  return (\r\n    <S.Container>\r\n      <Header/>\r\n      <S.Main>\r\n        <Sidebar />\r\n        {children}\r\n      </S.Main>\r\n    </S.Container>\r\n  )\r\n}","import {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Link\r\n} from \"react-router-dom\";\r\nimport Home from \"./pages/Home\";\r\nimport Container from \"./components/Container/Container\";\r\nimport {StoreProvider} from \"./store\";\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <StoreProvider>\r\n        <Container>\r\n          <Switch>\r\n            <Route exact path=\"/\">\r\n              <Home/>\r\n            </Route>\r\n          </Switch>\r\n        </Container>\r\n      </StoreProvider>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}